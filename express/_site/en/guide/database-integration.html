<!DOCTYPE html>
<!---
 Copyright (c) 2016 StrongLoop, IBM, and Express Contributors
 License: MIT
-->

<html lang="en" prefix="og: http://ogp.me/ns#">

  <head>
    <title>Express database integration</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="og:image" content="https://expressjs.com/images/express-facebook-share.png">
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link rel="stylesheet" href="/css/style.css?_=1652552968">
    <link rel="stylesheet" href="/css/dropit.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="/css/en.css">
    <link rel="stylesheet" href="/css/nodeinteractive.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script data-cfasync="false" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script data-cfasync="false" src="/js/ismobile.js"></script>
    <script data-cfasync="false" src="/js/app.js"></script>
    <script data-cfasync="false" src="/js/retina.js"></script>
    <script data-cfasync="false" src="/js/dropit.js"></script>
    <script data-cfasync="false" src="/js/prism.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

</head>


  
  <body class="en-doc">
  

    <section class="page content">

      <header>
  <div id="blm-banner">
    Black Lives Matter. <br>
    <a id="blm-donate"  href="https://support.eji.org/give/153413/#!/donation/checkout">Support the Equal Justice Initiative</a>.
  </div>
  <div id="mobile-menu">
      <div id="nav-button" class="fa fa-bars fa-2x button"></div>
  </div>
  <section id="logo"><a href="/" class="express">Express</a>
  </section>
  <div id="navbar">
      <input id="q" placeholder="ðŸ”Ž search">
      <ul id="navmenu">
          <li><a href="/" id="home-menu">Home</a></li>
          <li>
              <ul id="getting-started-menu" class="menu">
                  <li><a href="/en/starter/installing.html">Getting started</a>
                      <ul>
                          <li>
                            <a href="/en/starter/installing.html">
                              Installing
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/hello-world.html">
                              Hello world
                            </a>
                          </li>
                          <li>
                          <a href="/en/starter/generator.html">
                            Express generator
                          </a>
                          </li>
                          <li>
                            <a href="/en/starter/basic-routing.html">
                              Basic routing
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/static-files.html">
                              Static files
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/examples.html">
                              More examples
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/faq.html">
                              FAQ
                            </a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="guide-menu" class="menu">
                  <li><a href="/en/guide/routing.html" class="active">Guide</a>
                      <ul>
                          <li><a href="/en/guide/routing.html">Routing</a>
                          </li>
                          <li><a href="/en/guide/writing-middleware.html">Writing middleware</a>
                          </li>
                          <li><a href="/en/guide/using-middleware.html">Using middleware</a>
                          </li>
                          <li><a href="/en/guide/overriding-express-api.html">Overriding the Express API</a>
                          </li>
                          <li><a href="/en/guide/using-template-engines.html">Using template engines</a>
                          </li>
                          <li><a href="/en/guide/error-handling.html">Error handling</a>
                          </li>
                          <li><a href="/en/guide/debugging.html">Debugging</a>
                          </li>
                          <li><a href="/en/guide/behind-proxies.html">Express behind proxies</a>
                          </li>
                          <li><a href="/en/guide/migrating-4.html">Moving to Express 4</a>
                          </li>
                          <li><a href="/en/guide/migrating-5.html">Moving to Express 5</a>
                          </li>
                          <li><a href="/en/guide/database-integration.html">Database integration</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="application-menu" class="menu">
                  <li><a href="/en/4x/api.html">API reference</a>
                      <ul>
                          <li><a href="/en/5x/api.html">5.x (beta)</a>
                          </li>
                          <li><a href="/en/4x/api.html">4.x</a>
                          </li>
                          <li><a href="/en/3x/api.html">3.x (deprecated)</a>
                          </li>
                          <li><a href="/2x/">2.x (deprecated)</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="advanced-topics-menu" class="menu">
                  <li><a href="/en/advanced/developing-template-engines.html">Advanced topics</a>
                      <ul>
                          <li><a href="/en/advanced/developing-template-engines.html">Template engines</a>
                          </li>
                          <li><a href="/en/advanced/pm.html">Process managers</a>
                          </li>
                          <li><a href="/en/advanced/security-updates.html">Security updates</a>
                          </li>
                          <li><a href="/en/advanced/best-practice-security.html">Security best practices</a>
                          </li>
                          <li><a href="/en/advanced/best-practice-performance.html">Performance best practices</a>
                          </li>
                          <li><a href="/en/advanced/healthcheck-graceful-shutdown.html">Health checks and graceful shutdown</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="resources-menu" class="menu">
                  <li><a href="/en/resources/glossary.html">Resources</a>
                      <ul>
                          <li>
                            <a href="/en/resources/community.html">Community</a>
                          </li>
                          <li>
                            <a href="/en/resources/glossary.html">Glossary</a>
                          </li>
                          <li>
                            <a href="/en/resources/template-engines.html">Template Engines</a>
                          </li>
                          <li>
                            <a href="/en/resources/middleware.html">Middleware</a>
                          </li>
                          <li>
                            <a href="/en/resources/utils.html">Utility modules</a>
                          </li>
                          <li>
                            <a href="/en/resources/frameworks.html">Frameworks</a>
                          </li>
                          <li>
                            <a href="/en/resources/companies-using-express.html">Companies using Express</a>
                          </li>
                          <li>
                            <a href="/en/resources/open-source-using-express.html">Open-source projects</a>
                          </li>
                          <li>
                            <a href="/en/resources/learning.html">Additional learning</a>
                          </li>
                          <li>
                            <a href="/en/resources/contributing.html">Contributing to Express</a>
                          </li>
                          <li>
                            <a href="/en/changelog/4x.html">Release Change Log</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <!--
          <li>
              <ul id="changelog-menu" class="menu">
                  <li><a href="/en/changelog/4x.html">Changelog</a>
                      <ul>
                          <li><a href="/en/changelog/4x.html">4.x</a></li>
                      </ul>
                  </li>
              </ul>
          </li>
        -->
      </ul>
  </div>
</header>


      <div id="overlay"></div>

      
      <div id="page-doc" markdown="1">
<h1 id="database-integration">Database integration</h1>

<p>Adding the capability to connect databases to Express apps is just a matter of loading an appropriate Node.js driver for the database in your app. This document briefly explains how to add and use some of the most popular Node.js modules for database systems in your Express app:</p>

<ul>
  <li><a href="#cassandra">Cassandra</a></li>
  <li><a href="#couchbase">Couchbase</a></li>
  <li><a href="#couchdb">CouchDB</a></li>
  <li><a href="#leveldb">LevelDB</a></li>
  <li><a href="#mysql">MySQL</a></li>
  <li><a href="#mongodb">MongoDB</a></li>
  <li><a href="#neo4j">Neo4j</a></li>
  <li><a href="#oracle">Oracle</a></li>
  <li><a href="#postgresql">PostgreSQL</a></li>
  <li><a href="#redis">Redis</a></li>
  <li><a href="#sql-server">SQL Server</a></li>
  <li><a href="#sqlite">SQLite</a></li>
  <li><a href="#elasticsearch">Elasticsearch</a></li>
</ul>

<div class="doc-box doc-notice">
  <p>These database drivers are among many that are available.  For other options,
search on the <a href="https://www.npmjs.com/">npm</a> site.</p>
</div>

<h2 id="cassandra">Cassandra</h2>

<p><strong>Module</strong>: <a href="https://github.com/datastax/nodejs-driver">cassandra-driver</a></p>

<h3 id="installation">Installation</h3>

<pre><code class="language-console">$ npm install cassandra-driver
</code></pre>

<h3 id="example">Example</h3>

<pre><code class="language-js">const cassandra = require('cassandra-driver')
const client = new cassandra.Client({ contactPoints: ['localhost'] })

client.execute('select key from system.local', (err, result) =&gt; {
  if (err) throw err
  console.log(result.rows[0])
})
</code></pre>

<h2 id="couchbase">Couchbase</h2>

<p><strong>Module</strong>: <a href="https://github.com/couchbase/couchnode">couchnode</a></p>

<h3 id="installation-1">Installation</h3>

<pre><code class="language-console">$ npm install couchbase
</code></pre>

<h3 id="example-1">Example</h3>

<pre><code class="language-js">const couchbase = require('couchbase')
const bucket = (new couchbase.Cluster('http://localhost:8091')).openBucket('bucketName')

// add a document to a bucket
bucket.insert('document-key', { name: 'Matt', shoeSize: 13 }, (err, result) =&gt; {
  if (err) {
    console.log(err)
  } else {
    console.log(result)
  }
})

// get all documents with shoe size 13
const n1ql = 'SELECT d.* FROM `bucketName` d WHERE shoeSize = $1'
const query = N1qlQuery.fromString(n1ql)
bucket.query(query, [13], (err, result) =&gt; {
  if (err) {
    console.log(err)
  } else {
    console.log(result)
  }
})
</code></pre>

<h2 id="couchdb">CouchDB</h2>

<p><strong>Module</strong>: <a href="https://github.com/dscape/nano">nano</a></p>

<h3 id="installation-2">Installation</h3>

<pre><code class="language-console">$ npm install nano
</code></pre>

<h3 id="example-2">Example</h3>

<pre><code class="language-js">const nano = require('nano')('http://localhost:5984')
nano.db.create('books')
const books = nano.db.use('books')

// Insert a book document in the books database
books.insert({ name: 'The Art of war' }, null, (err, body) =&gt; {
  if (err) {
    console.log(err)
  } else {
    console.log(body)
  }
})

// Get a list of all books
books.list((err, body) =&gt; {
  if (err) {
    console.log(err)
  } else {
    console.log(body.rows)
  }
})
</code></pre>

<h2 id="leveldb">LevelDB</h2>

<p><strong>Module</strong>: <a href="https://github.com/rvagg/node-levelup">levelup</a></p>

<h3 id="installation-3">Installation</h3>

<pre><code class="language-console">$ npm install level levelup leveldown
</code></pre>

<h3 id="example-3">Example</h3>

<pre><code class="language-js">const levelup = require('levelup')
const db = levelup('./mydb')

db.put('name', 'LevelUP', (err) =&gt; {
  if (err) return console.log('Ooops!', err)

  db.get('name', (err, value) =&gt; {
    if (err) return console.log('Ooops!', err)

    console.log(`name=${value}`)
  })
})
</code></pre>

<h2 id="mysql">MySQL</h2>

<p><strong>Module</strong>: <a href="https://github.com/felixge/node-mysql/">mysql</a></p>

<h3 id="installation-4">Installation</h3>

<pre><code class="language-console">$ npm install mysql
</code></pre>

<h3 id="example-4">Example</h3>

<pre><code class="language-js">const mysql = require('mysql')
const connection = mysql.createConnection({
  host: 'localhost',
  user: 'dbuser',
  password: 's3kreee7',
  database: 'my_db'
})

connection.connect()

connection.query('SELECT 1 + 1 AS solution', (err, rows, fields) =&gt; {
  if (err) throw err

  console.log('The solution is: ', rows[0].solution)
})

connection.end()
</code></pre>

<h2 id="mongodb">MongoDB</h2>

<p><strong>Module</strong>: <a href="https://github.com/mongodb/node-mongodb-native">mongodb</a></p>

<h3 id="installation-5">Installation</h3>

<pre><code class="language-console">$ npm install mongodb
</code></pre>

<h3 id="example-v2">Example (v2.*)</h3>

<pre><code class="language-js">const MongoClient = require('mongodb').MongoClient

MongoClient.connect('mongodb://localhost:27017/animals', (err, db) =&gt; {
  if (err) throw err

  db.collection('mammals').find().toArray((err, result) =&gt; {
    if (err) throw err

    console.log(result)
  })
})
</code></pre>

<h3 id="example-v3">Example (v3.*)</h3>

<pre><code class="language-js">const MongoClient = require('mongodb').MongoClient

MongoClient.connect('mongodb://localhost:27017/animals', (err, client) =&gt; {
  if (err) throw err

  const db = client.db('animals')

  db.collection('mammals').find().toArray((err, result) =&gt; {
    if (err) throw err

    console.log(result)
  })
})
</code></pre>

<p>If you want an object model driver for MongoDB, look at <a href="https://github.com/LearnBoost/mongoose">Mongoose</a>.</p>

<h2 id="neo4j">Neo4j</h2>

<p><strong>Module</strong>: <a href="https://github.com/neo4j/neo4j-javascript-driver">neo4j-driver</a></p>

<h3 id="installation-6">Installation</h3>

<pre><code class="language-console">$ npm install neo4j-driver
</code></pre>

<h3 id="example-5">Example</h3>

<pre><code class="language-js">const neo4j = require('neo4j-driver')
const driver = neo4j.driver('neo4j://localhost:7687', neo4j.auth.basic('neo4j', 'letmein'))

const session = driver.session()

session.readTransaction((tx) =&gt; {
  return tx.run('MATCH (n) RETURN count(n) AS count')
    .then((res) =&gt; {
      console.log(res.records[0].get('count'))
    })
    .catch((error) =&gt; {
      console.log(error)
    })
})
</code></pre>

<h2 id="oracle">Oracle</h2>

<p><strong>Module</strong>: <a href="https://github.com/oracle/node-oracledb">oracledb</a></p>

<h3 id="installation-7">Installation</h3>

<p>NOTE: <a href="https://github.com/oracle/node-oracledb#-installation">See installation prerequisites</a>.</p>

<pre><code class="language-console">$ npm install oracledb
</code></pre>

<h3 id="example-6">Example</h3>

<pre><code class="language-js">const oracledb = require('oracledb')
const config = {
  user: '&lt;your db user&gt;',
  password: '&lt;your db password&gt;',
  connectString: 'localhost:1521/orcl'
}

async function getEmployee (empId) {
  let conn

  try {
    conn = await oracledb.getConnection(config)

    const result = await conn.execute(
      'select * from employees where employee_id = :id',
      [empId]
    )

    console.log(result.rows[0])
  } catch (err) {
    console.log('Ouch!', err)
  } finally {
    if (conn) { // conn assignment worked, need to close
      await conn.close()
    }
  }
}

getEmployee(101)
</code></pre>

<h2 id="postgresql">PostgreSQL</h2>

<p><strong>Module</strong>: <a href="https://github.com/vitaly-t/pg-promise">pg-promise</a></p>

<h3 id="installation-8">Installation</h3>

<pre><code class="language-console">$ npm install pg-promise
</code></pre>

<h3 id="example-7">Example</h3>

<pre><code class="language-js">const pgp = require('pg-promise')(/* options */)
const db = pgp('postgres://username:password@host:port/database')

db.one('SELECT $1 AS value', 123)
  .then((data) =&gt; {
    console.log('DATA:', data.value)
  })
  .catch((error) =&gt; {
    console.log('ERROR:', error)
  })
</code></pre>

<h2 id="redis">Redis</h2>

<p><strong>Module</strong>: <a href="https://github.com/mranney/node_redis">redis</a></p>

<h3 id="installation-9">Installation</h3>

<pre><code class="language-console">$ npm install redis
</code></pre>

<h3 id="example-8">Example</h3>

<pre><code class="language-js">const redis = require('redis')
const client = redis.createClient()

client.on('error', (err) =&gt; {
  console.log(`Error ${err}`)
})

client.set('string key', 'string val', redis.print)
client.hset('hash key', 'hashtest 1', 'some value', redis.print)
client.hset(['hash key', 'hashtest 2', 'some other value'], redis.print)

client.hkeys('hash key', (err, replies) =&gt; {
  console.log(`${replies.length} replies:`)

  replies.forEach((reply, i) =&gt; {
    console.log(`    ${i}: ${reply}`)
  })

  client.quit()
})
</code></pre>

<h2 id="sql-server">SQL Server</h2>

<p><strong>Module</strong>: <a href="https://github.com/tediousjs/tedious">tedious</a></p>

<h3 id="installation-10">Installation</h3>

<pre><code class="language-console">$ npm install tedious
</code></pre>

<h3 id="example-9">Example</h3>

<pre><code class="language-js">const Connection = require('tedious').Connection
const Request = require('tedious').Request

const config = {
  server: 'localhost',
  authentication: {
    type: 'default',
    options: {
      userName: 'your_username', // update me
      password: 'your_password' // update me
    }
  }
}

const connection = new Connection(config)

connection.on('connect', (err) =&gt; {
  if (err) {
    console.log(err)
  } else {
    executeStatement()
  }
})

function executeStatement () {
  request = new Request("select 123, 'hello world'", (err, rowCount) =&gt; {
    if (err) {
      console.log(err)
    } else {
      console.log(`${rowCount} rows`)
    }
    connection.close()
  })

  request.on('row', (columns) =&gt; {
    columns.forEach((column) =&gt; {
      if (column.value === null) {
        console.log('NULL')
      } else {
        console.log(column.value)
      }
    })
  })

  connection.execSql(request)
}
</code></pre>

<h2 id="sqlite">SQLite</h2>

<p><strong>Module</strong>: <a href="https://github.com/mapbox/node-sqlite3">sqlite3</a></p>

<h3 id="installation-11">Installation</h3>

<pre><code class="language-console">$ npm install sqlite3
</code></pre>

<h3 id="example-10">Example</h3>

<pre><code class="language-js">const sqlite3 = require('sqlite3').verbose()
const db = new sqlite3.Database(':memory:')

db.serialize(() =&gt; {
  db.run('CREATE TABLE lorem (info TEXT)')
  const stmt = db.prepare('INSERT INTO lorem VALUES (?)')

  for (let i = 0; i &lt; 10; i++) {
    stmt.run(`Ipsum ${i}`)
  }

  stmt.finalize()

  db.each('SELECT rowid AS id, info FROM lorem', (err, row) =&gt; {
    console.log(`${row.id}: ${row.info}`)
  })
})

db.close()
</code></pre>

<h2 id="elasticsearch">Elasticsearch</h2>

<p><strong>Module</strong>: <a href="https://github.com/elastic/elasticsearch-js">elasticsearch</a></p>

<h3 id="installation-12">Installation</h3>

<pre><code class="language-console">$ npm install elasticsearch
</code></pre>

<h3 id="example-11">Example</h3>

<pre><code class="language-js">const elasticsearch = require('elasticsearch')
const client = elasticsearch.Client({
  host: 'localhost:9200'
})

client.search({
  index: 'books',
  type: 'book',
  body: {
    query: {
      multi_match: {
        query: 'express js',
        fields: ['title', 'description']
      }
    }
  }
}).then((response) =&gt; {
  const hits = response.hits.hits
}, (error) =&gt; {
  console.trace(error.message)
})
</code></pre>

      </div>
    </section>

    <a id="top" href="#"><img src="/images/arrow.png"></a>

<footer>
  <section id="doc-langs">
  Documentation translations provided by <a href="http://strongloop.com">StrongLoop/IBM</a>:
  <a href="/fr/">French</a>, <a href="/de/">German</a>, <a href="/es/">Spanish</a>, <a href="/it/">Italian</a>, <a href="/ja/">Japanese</a>, <a href="/ru/">Russian</a>, <a href="/zh-cn/">Chinese</a>, <a href="/zh-tw/">Traditional Chinese</a>, <a href="/ko/">Korean</a>, <a href="/pt-br/">Portuguese</a>.
  <br>
  Community translation available for: <a href="/sk/">Slovak</a>, <a href="/uk/">Ukrainian</a>, <a href="/uz/">Uzbek</a>, <a href="/tr/">Turkish</a> and <a href="/th/">Thai</a>.
  </section>
  <div id="footer-content">
      <div id="github">
        <a class="github-button" href="https://github.com/expressjs/expressjs.com" data-icon="octicon-star" aria-label="Star expressjs/expressjs.com on GitHub">Star</a>
      </div>
      <div id="sponsor"><a href="https://expressjs.com">Express</a> is a project of the <a href="https://openjsf.org">OpenJS Foundation</a>.</div>
      <div id="fork"><a href="https://github.com/expressjs/expressjs.com">Fork the website on GitHub</a>.</div>
      <div>Copyright &copy; 2017 StrongLoop, IBM, and other expressjs.com contributors.</div>
  </div>
  <div id="license">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/us/80x15.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-ShareAlike 3.0 United States License</a>.
  </div>
</footer>

<script async defer src="https://buttons.github.io/buttons.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '7164e33055faa6ecddefd9e08fc59f5d',
  indexName: 'expressjs',
  inputSelector: '#q',
  algoliaOptions: { 'facetFilters': ['lang:en'] }
})" async></script>



  </body>

</html>

